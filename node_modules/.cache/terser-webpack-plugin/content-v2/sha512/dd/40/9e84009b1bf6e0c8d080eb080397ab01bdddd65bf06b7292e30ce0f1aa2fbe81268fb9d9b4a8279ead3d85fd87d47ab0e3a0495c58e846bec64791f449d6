{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{466:function(e,s,a){\"use strict\";a.r(s);var t=a(50),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"developer-guide\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#developer-guide\"}},[e._v(\"#\")]),e._v(\" Developer Guide\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"requirements\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#requirements\"}},[e._v(\"#\")]),e._v(\" Requirements\")]),e._v(\" \"),a(\"ul\",[a(\"li\",[e._v(\"Git\")]),e._v(\" \"),a(\"li\",[e._v(\"Golang (version >= 1.13)\")]),e._v(\" \"),a(\"li\",[e._v(\"Docker (version >= 19.03)\")]),e._v(\" \"),a(\"li\",[e._v(\"Kubernetes (version >= 1.14)\")]),e._v(\" \"),a(\"li\",[e._v(\"GNU Make\")])]),e._v(\" \"),a(\"p\",[e._v(\"For installation of Golang, please refer to \"),a(\"a\",{attrs:{href:\"https://golang.org/dl/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Install Golang\"),a(\"OutboundLink\")],1)]),e._v(\" \"),a(\"p\",[a(\"code\",[e._v(\"make\")]),e._v(\" is usually in a \"),a(\"code\",[e._v(\"build-essential\")]),e._v(\" package in your distribution's package manager of choice. Make sure you have \"),a(\"code\",[e._v(\"make\")]),e._v(\" on your machine.\")]),e._v(\" \"),a(\"p\",[e._v(\"There're great chances that you may want to run your implementation in a real Kubernetes cluster, so probably a Docker is needed for some necessary operations like building images.\\nSee \"),a(\"a\",{attrs:{href:\"https://docs.docker.com/engine/install/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Install Docker\"),a(\"OutboundLink\")],1),e._v(\" for more information.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"how-to-build-run-and-debug\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#how-to-build-run-and-debug\"}},[e._v(\"#\")]),e._v(\" How to Build, Run and Debug\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"get-source-code\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#get-source-code\"}},[e._v(\"#\")]),e._v(\" Get Source Code\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"mkdir\")]),e._v(\" -p \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"$GOPATH\")]),e._v(\"/src/github.com/fluid-cloudnative/\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"cd\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"$GOPATH\")]),e._v(\"/src/github.com/fluid-cloudnative\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"git\")]),e._v(\" clone https://github.com/fluid-cloudnative/fluid.git\\n\")])])]),a(\"blockquote\",[a(\"p\",[a(\"strong\",[e._v(\"NOTE\")]),e._v(\": In this document, we build, run and debug under non-module environment.\")]),e._v(\" \"),a(\"p\",[e._v(\"See \"),a(\"a\",{attrs:{href:\"https://github.com/golang/go/wiki/Modules\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Go Modules\"),a(\"OutboundLink\")],1),e._v(\" for more information if some issue occurs to you.\")])]),e._v(\" \"),a(\"h3\",{attrs:{id:\"build-binary\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#build-binary\"}},[e._v(\"#\")]),e._v(\" Build Binary\")]),e._v(\" \"),a(\"p\",[a(\"code\",[e._v(\"Makefile\")]),e._v(\" under project directory provides many tasks you may want to use including Test, Build, Debug, Deploy etc.\")]),e._v(\" \"),a(\"p\",[e._v(\"You can simply get a binary by running:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# build dataset-controller, alluxioruntime-controller and csi Binary\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"make\")]),e._v(\" build\\n\")])])]),a(\"p\",[e._v(\"By default, the binary would be put under \"),a(\"code\",[e._v(\"<fluid-path>/bin\")]),e._v(\".\")]),e._v(\" \"),a(\"h3\",{attrs:{id:\"build-images\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#build-images\"}},[e._v(\"#\")]),e._v(\" Build Images\")]),e._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[e._v(\"Set tags for images\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# set name for image of dataset-controller\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"export\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"DATASET_CONTROLLER_IMG\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-registry\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-namespace\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"img-name\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# set name for image of alluxioruntime-controller\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"export\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"ALLUXIORUNTIME_CONTROLLER_IMG\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-registry\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-namespace\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"img-name\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# set name for image of  CSI\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"export\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"CSI_IMG\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-registry\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-namespace\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"csi-img-name\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# set name for image of init-user\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"export\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"INIT_USERS_IMG\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-registry\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"your-namespace\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"csi-img-name\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# build all images\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"make\")]),e._v(\" docker-build-all\\n\")])])]),a(\"p\",[e._v(\"Before running Fluid, you need to push the built image to an accessible image registry.\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Login to a image registry\")]),e._v(\" \"),a(\"p\",[e._v(\"Make sure you've login to a docker image registry that you'd like to push your image to:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" docker login \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"docker-registry\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\")])])])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"push your images:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"make\")]),e._v(\" docker-push-all\\n\")])])])])]),e._v(\" \"),a(\"h3\",{attrs:{id:\"run-your-fluid-on-kubernetes-cluster\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#run-your-fluid-on-kubernetes-cluster\"}},[e._v(\"#\")]),e._v(\" Run Your Fluid on Kubernetes Cluster\")]),e._v(\" \"),a(\"p\",[e._v(\"In the following steps, we assume you have properly configured \"),a(\"code\",[e._v(\"KUBECONFIG\")]),e._v(\" environment variable or set up \"),a(\"code\",[e._v(\"~/.kube/config\")]),e._v(\". See \"),a(\"a\",{attrs:{href:\"https://kubernetes.io/docs/tasks/access-application-cluster/configure-access-multiple-clusters/\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Kubeconfig docs\"),a(\"OutboundLink\")],1),e._v(\" for more information.\")]),e._v(\" \"),a(\"ol\",[a(\"li\",[a(\"p\",[e._v(\"Push your images to a image registry accessible to your Kubernetes cluster\")]),e._v(\" \"),a(\"p\",[e._v(\"If your images are pushed to some private repositories, make sure your Kubernetes cluster hold credentials for accessing those repositories.\")])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Change image  in the samples we provide:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-yaml extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# <fluid-path>/config/fluid/patches/image_in_manager.yaml\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"...\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"...\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"containers\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"name\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" manager\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"image\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" <registry\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),e._v(\"/<namespace\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),e._v(\"/<img\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\"repo\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"<img\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\"tag\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),e._v(\"\\n\")])])]),a(\"div\",{staticClass:\"language-yaml extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# <fluid-path>/config/fluid/patches/image_in_csi-plugin.yaml\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"...\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"...\")]),e._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"containers\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"\\n  \"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"name\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" plugins\\n    \"),a(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[e._v(\"image\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\" <registry\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),e._v(\"/<namespace\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),e._v(\"/<csi\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\"img\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\"name\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\":\")]),e._v(\"<csi\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\"img\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\"-\")]),e._v(\"tag\"),a(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[e._v(\">\")]),e._v(\"\\n\")])])])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Install CRDs\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl apply -k config/crd\\n\")])])]),a(\"p\",[e._v(\"Check CRD with:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get crd \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"grep\")]),e._v(\" fluid\\nalluxiodataloads.data.fluid.io          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2020\")]),e._v(\"-08-22T03:53:46Z\\nalluxioruntimes.data.fluid.io           \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2020\")]),e._v(\"-08-22T03:53:46Z\\ndatasets.data.fluid.io                  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2020\")]),e._v(\"-08-22T03:53:46Z\\n\")])])])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Install your implementation\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl apply -k config/fluid\\n\")])])]),a(\"p\",[e._v(\"Check Fluid system with:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get pod -n fluid-system\\nNAME                                  READY   STATUS    RESTARTS   AGE\\ncontroller-manager-7fd6457ccf-p7j2x   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          84s\\ncsi-nodeplugin-fluid-pj9tv            \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          84s\\ncsi-nodeplugin-fluid-t8ctj            \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          84s\\n\")])])])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Run samples to verify your implementation\")]),e._v(\" \"),a(\"p\",[e._v(\"Here is a sample provided by us, you may want to rewrite it according to your implementation.\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl apply -k config/samples\\n\")])])]),a(\"p\",[e._v(\"Check sample pods:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get pod\\nNAME                   READY   STATUS    RESTARTS   AGE\\ncifar10-fuse-vb6l4     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          6m15s\\ncifar10-fuse-vtqpx     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          6m15s\\ncifar10-master-0       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          8m24s\\ncifar10-worker-729xz   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          6m15s\\ncifar10-worker-d6kmd   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          6m15s\\nnginx-0                \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          8m30s\\nnginx-1                \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          8m30s\\n\")])])])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Check logs to verify your implementation\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl logs -n fluid-system \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"controller_manager_name\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\")])])])]),e._v(\" \"),a(\"li\",[a(\"p\",[e._v(\"Clean up\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl delete -k config/samples\\n$ kubectl delete -k config/fluid\\n$ kubectl delete -k config/crd\\n\")])])])])]),e._v(\" \"),a(\"h3\",{attrs:{id:\"unit-testing\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#unit-testing\"}},[e._v(\"#\")]),e._v(\" Unit Testing\")]),e._v(\" \"),a(\"h4\",{attrs:{id:\"basic-tests\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#basic-tests\"}},[e._v(\"#\")]),e._v(\" Basic Tests\")]),e._v(\" \"),a(\"p\",[e._v(\"Execute following command from project root to run basic unit tests:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"make\")]),e._v(\" unit-test\\n\")])])]),a(\"h4\",{attrs:{id:\"integration-tests\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#integration-tests\"}},[e._v(\"#\")]),e._v(\" Integration Tests\")]),e._v(\" \"),a(\"p\",[a(\"code\",[e._v(\"kubebuilder\")]),e._v(\" provided a integration test framework based on \"),a(\"a\",{attrs:{href:\"https://godoc.org/sigs.k8s.io/controller-runtime/pkg/envtest\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"envtest\"),a(\"OutboundLink\")],1),e._v(\" package. You must install \"),a(\"code\",[e._v(\"kubebuilder\")]),e._v(\" before running integration tests:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"os\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"$(\")]),e._v(\"go \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"env\")]),e._v(\" GOOS\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\")\")])]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"arch\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"$(\")]),e._v(\"go \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"env\")]),e._v(\" GOARCH\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\")\")])]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"curl\")]),e._v(\" -L https://go.kubebuilder.io/dl/2.3.1/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"${os}\")]),e._v(\"/\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"${arch}\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"tar\")]),e._v(\" -xz -C /tmp/\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"sudo\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"mv\")]),e._v(\" /tmp/kubebuilder_2.3.1_\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"${os}\")]),e._v(\"_\"),a(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[e._v(\"${arch}\")]),e._v(\" /usr/local/kubebuilder\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"export\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[a(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[e._v(\"PATH\")])]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[e._v(\"$PATH\")]),e._v(\":/usr/local/kubebuilder/bin\\n\")])])]),a(\"p\",[e._v(\"Next, run all unit tests (integration tests included) with:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"make\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"test\")]),e._v(\"\\n\")])])]),a(\"blockquote\",[a(\"p\",[a(\"strong\",[e._v(\"NOTE:\")]),e._v(\" When running unit tests on a non-linux system such as macOS, if testing failed and says \"),a(\"code\",[e._v(\"exec format error\")]),e._v(\", you may need to check whether \"),a(\"code\",[e._v(\"GOOS\")]),e._v(\" is consistent with your actual OS.\")])]),e._v(\" \"),a(\"h3\",{attrs:{id:\"debug\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#debug\"}},[e._v(\"#\")]),e._v(\" Debug\")]),e._v(\" \"),a(\"p\",[e._v(\"You can debug your program in multiple ways, here is just a brief guide for how to debug with \"),a(\"code\",[e._v(\"go-delve\")])]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Prerequisites\")])]),e._v(\" \"),a(\"p\",[e._v(\"Make sure you have \"),a(\"code\",[e._v(\"go-delve\")]),e._v(\" installed. See \"),a(\"a\",{attrs:{href:\"https://github.com/go-delve/delve/tree/master/Documentation/installation\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"go-delve installation guide\"),a(\"OutboundLink\")],1),e._v(\" for more information\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Debug locally\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# build & debug in one line\")]),e._v(\"\\n$ dlv debug \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"fluid-path\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"/cmd/controller/main.go\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# debug binary\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"make\")]),e._v(\" manager\\n$ dlv \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"exec\")]),e._v(\" bin/manager\\n\")])])]),a(\"p\",[a(\"strong\",[e._v(\"Debug remotely\")])]),e._v(\" \"),a(\"p\",[e._v(\"On remote host:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ dlv debug --headless --listen \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\":12345\"')]),e._v(\" --log --api-version\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\" cmd/controller/main.go\\n\")])])]),a(\"p\",[e._v(\"The command above will make \"),a(\"code\",[e._v(\"go-delve\")]),e._v(\" start a debug service and listen for port 12345.\")]),e._v(\" \"),a(\"p\",[e._v(\"On local host, connect to the debug service:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ dlv connect \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v('\"<remote-address>:12345\"')]),e._v(\" --api-version\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"\\n\")])])]),a(\"blockquote\",[a(\"p\",[e._v(\"Note: To debug remotely, make sure the specified port is not occupied and the firewall has been properly configured.\")])])])}),[],!1,null,null,null);s.default=n.exports}}]);","extractedComments":[]}