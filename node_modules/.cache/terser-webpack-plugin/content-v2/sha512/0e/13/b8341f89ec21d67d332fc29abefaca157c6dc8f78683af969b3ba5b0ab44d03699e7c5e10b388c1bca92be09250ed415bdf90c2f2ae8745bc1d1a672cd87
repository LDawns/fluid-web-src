{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{502:function(e,t,s){\"use strict\";s.r(t);var a=s(50),n=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"demo-use-secret-to-configure-dataset-sensitive-information\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#demo-use-secret-to-configure-dataset-sensitive-information\"}},[e._v(\"#\")]),e._v(\" DEMO - Use Secret to configure Dataset sensitive information\")]),e._v(\" \"),s(\"p\",[e._v(\"When creating a Dataset in Fluid, sometimes we need to configure some sensitive information in the \"),s(\"code\",[e._v(\"mounts\")]),e._v(\". To ensure security, Fluid provides the ability to configure these sensitive information using Secret. The following takes access to the \"),s(\"a\",{attrs:{href:\"https://cn.aliyun.com/product/oss\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Aliyun OSS\"),s(\"OutboundLink\")],1),e._v(\" data set as an example to illustrate how to configure.\")]),e._v(\" \"),s(\"h2\",{attrs:{id:\"deploy-dataset-with-sensitive-information\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#deploy-dataset-with-sensitive-information\"}},[e._v(\"#\")]),e._v(\" Deploy Dataset with sensitive information\")]),e._v(\" \"),s(\"h3\",{attrs:{id:\"create-dataset-and-runtime\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#create-dataset-and-runtime\"}},[e._v(\"#\")]),e._v(\" Create Dataset and Runtime\")]),e._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[e._v(\"$ \"),s(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cat\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),s(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">>\")]),e._v(\" dataset.yaml\")]),e._v('\\napiVersion: data.fluid.io/v1alpha1\\nkind: Dataset\\nmetadata:\\n  name: mydata\\nspec:\\n  mounts:\\n  - mountPoint: oss://<OSS_BUCKET>/<OSS_DIRECTORY>/\\n    name: mydata\\n    options:\\n      fs.oss.endpoint: <OSS_ENDPOINT>\\n    encryptOptions:\\n      - name: fs.oss.accessKeyId\\n        valueFrom:\\n          secretKeyRef:\\n            name: mysecret\\n            key: fs.oss.accessKeyId\\n      - name: fs.oss.accessKeySecret\\n        valueFrom:\\n          secretKeyRef:\\n            name: mysecret\\n            key: fs.oss.accessKeySecret\\n---\\napiVersion: data.fluid.io/v1alpha1\\nkind: AlluxioRuntime\\nmetadata:\\n  name: mydata\\nspec:\\n  replicas: 1\\n  tieredstore:\\n    levels:\\n      - mediumtype: MEM\\n        path: /dev/shm\\n        quota: 2Gi\\n        high: \"0.95\"\\n        low: \"0.7\"\\nEOF')]),e._v(\"\\n\")])])]),s(\"p\",[e._v(\"As you can see, in the above configuration, unlike the direct configuration of \"),s(\"code\",[e._v(\"fs.oss.endpoint\")]),e._v(\", we changed the configuration of \"),s(\"code\",[e._v(\"fs.oss.accessKeyId\")]),e._v(\" and \"),s(\"code\",[e._v(\"fs.oss.accessKeySecret\")]),e._v(\" to read from Secret to ensure safety.\")]),e._v(\" \"),s(\"blockquote\",[s(\"p\",[e._v(\"It should be noted that if the same key is configured both in \"),s(\"code\",[e._v(\"options\")]),e._v(\" and \"),s(\"code\",[e._v(\"encryptOptions\")]),e._v(\", then the value in \"),s(\"code\",[e._v(\"encryptOptions\")]),e._v(\" will override the corresponding value in \"),s(\"code\",[e._v(\"options\")]),e._v(\".\")])]),e._v(\" \"),s(\"h3\",{attrs:{id:\"create-secret\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#create-secret\"}},[e._v(\"#\")]),e._v(\" Create Secret\")]),e._v(\" \"),s(\"p\",[e._v(\"In the Secret to be created, you need to specify the sensitive information that needs to be configured in the above Dataset.\")]),e._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[e._v(\"$ cat\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),s(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"mysecret.yaml\")]),e._v(\"\\napiVersion: v1\\nkind: Secret\\nmetadata:\\n  name: mysecret\\nstringData:\\n  fs.oss.accessKeyId: <OSS_ACCESS_KEY_ID>\\n  fs.oss.accessKeySecret: <OSS_ACCESS_KEY_SECRET>\\nEOF\")]),e._v(\"\\n\")])])]),s(\"p\",[e._v(\"As you can see, the specific contents of \"),s(\"code\",[e._v(\"fs.oss.accessKeySecret\")]),e._v(\" and \"),s(\"code\",[e._v(\"fs.oss.accessKeyId\")]),e._v(\" are written in Secret, and Dataset reads the corresponding value by looking for the Secret and key accroding to its configuration, instead of reading them in its configuration directly. So the security of some data is guaranteed.\")])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}