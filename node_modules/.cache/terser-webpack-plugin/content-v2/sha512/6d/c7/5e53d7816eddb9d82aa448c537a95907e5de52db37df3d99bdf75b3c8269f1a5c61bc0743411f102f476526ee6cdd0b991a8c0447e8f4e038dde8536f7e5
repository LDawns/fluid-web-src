{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{510:function(a,t,s){\"use strict\";s.r(t);var e=s(50),n=Object(e.a)({},(function(){var a=this,t=a.$createElement,s=a._self._c||t;return s(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":a.$parent.slotKey}},[s(\"h1\",{attrs:{id:\"示例-pod-调度优化\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#示例-pod-调度优化\"}},[a._v(\"#\")]),a._v(\" 示例 - Pod 调度优化\")]),a._v(\" \"),s(\"p\",[a._v(\"为了帮助用户更好的使用fluid，我们提供了一系列调度插件。\\n通过为Pod自动注入亲和性相关信息，优化Pod的调度结果，提高集群的整体使用效率。\")]),a._v(\" \"),s(\"h2\",{attrs:{id:\"前提条件\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#前提条件\"}},[a._v(\"#\")]),a._v(\" 前提条件\")]),a._v(\" \"),s(\"p\",[a._v(\"您使用的k8s版本需要支持 admissionregistration.k8s.io/v1beta1（ Kubernetes version > 1.14 )\")]),a._v(\" \"),s(\"h2\",{attrs:{id:\"使用方法\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#使用方法\"}},[a._v(\"#\")]),a._v(\" 使用方法\")]),a._v(\" \"),s(\"p\",[s(\"strong\",[a._v(\"为namespace添加标签\")])]),a._v(\" \"),s(\"p\",[a._v(\"为namespace添加标签fluid.io/enable-injection后，可以开启此namespace下Pod的调度优化功能\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-bash extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[s(\"code\",[a._v(\"$ kubectl label namespace default fluid.io/enable-injection\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),a._v(\"true\\n\")])])]),s(\"p\",[a._v(\"如果该命名空间下的某些Pod，您不希望开启调度优化功能，只需为Pod打上标签fluid.io/enable-injection=false\")]),a._v(\" \"),s(\"p\",[a._v(\"例如，使用yaml文件方式创建一个nginx-1 Pod时，应对yaml文件做如下修改：\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-yaml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"apiVersion\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" v1\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"kind\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" Pod\\n\"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"metadata\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"name\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" nginx\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"1\")]),a._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"labels\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"fluid.io/enable-injection\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token boolean important\"}},[a._v(\"false\")]),a._v(\"\\n\")])])]),s(\"p\",[s(\"strong\",[a._v(\"查看全部结点\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ kubectl get nodes\\nNAME                      STATUS   ROLES    AGE   VERSION\\nnode.172.16.0.16   Ready    \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"   16d   v1.20.4-aliyun.1\\nnode.172.16.1.84   Ready    \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"   16d   v1.20.4-aliyun.1\\n\")])])]),s(\"p\",[s(\"strong\",[a._v(\"检查待创建的Dataset资源对象\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ cat\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<<\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v(\"EOF\"),s(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"dataset-global.yaml\")]),a._v('\\napiVersion: data.fluid.io/v1alpha1\\nkind: Dataset\\nmetadata:\\n  name: hbase\\nspec:\\n  mounts:\\n    - mountPoint: https://mirrors.tuna.tsinghua.edu.cn/apache/hbase/stable/\\n      name: hbase\\n---\\napiVersion: data.fluid.io/v1alpha1\\nkind: AlluxioRuntime\\nmetadata:\\n  name: hbase\\nspec:\\n  replicas: 1\\n  tieredstore:\\n    levels:\\n      - mediumtype: MEM\\n        path: /dev/shm\\n        quota: 2Gi\\n        high: \"0.95\"\\n        low: \"0.7\"\\n  fuse:\\n    global: true\\n    nodeSelector:\\n      kubernetes.io/hostname: node.172.16.1.84\\nEOF')]),a._v(\"\\n\")])])]),s(\"blockquote\",[s(\"p\",[a._v(\"这里通过nodeselector指定了\")])]),a._v(\" \"),s(\"p\",[s(\"strong\",[a._v(\"创建Dataset资源对象\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ kubectl create -f dataset-global.yaml\\ndataset.data.fluid.io/hbase created\\n\")])])]),s(\"p\",[a._v(\"该配置文件片段中，包含了许多与Alluxio相关的配置信息，这些信息将被Fluid用来启动一个Alluxio实例。\\n上述配置片段中的\"),s(\"code\",[a._v(\"spec.replicas\")]),a._v(\"属性被设置为1,这表明Fluid将会启动一个包含1个Alluxio Master和1个Alluxio Worker的Alluxio实例。\\n另外一个值得注意的是Fuse包含\"),s(\"code\",[a._v(\"global: true\")]),a._v(\",这样意味着Fuse可以全局部署，而不依赖于数据缓存的位置。\")]),a._v(\" \"),s(\"p\",[s(\"strong\",[a._v(\"创建AlluxioRuntime资源并查看状态\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ kubectl create -f runtime.yaml\\nalluxioruntime.data.fluid.io/hbase created\\n\\n$  kubectl get po -owide\\nNAME                 READY   STATUS    RESTARTS   AGE   IP             NODE                      NOMINATED NODE   READINESS GATES\\nhbase-fuse-sc9b8     \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"1\")]),a._v(\"/1     Running   \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"0\")]),a._v(\"          10m   \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"172.16\")]),a._v(\".1.84    node.172.16.1.84   \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"           \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"\\nhbase-master-0       \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"2\")]),a._v(\"/2     Running   \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"0\")]),a._v(\"          11m   \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"172.16\")]),a._v(\".0.16    node.172.16.0.16   \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"           \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"\\nhbase-worker-dpn5b   \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"2\")]),a._v(\"/2     Running   \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"0\")]),a._v(\"          10m   \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"172.16\")]),a._v(\".1.84    node.172.16.1.84   \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"           \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<\")]),a._v(\"none\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"\\n\")])])]),s(\"p\",[a._v(\"在此处可以看到，有一个Alluxio Worker成功启动，并且运行在结点192.168.1.146上。Alluixo Fuse的数量为1，运行在子节点node.172.16.1.84上。\")]),a._v(\" \"),s(\"h2\",{attrs:{id:\"运行示例1-创建没有挂载数据集的pod-它将尽量被调度到远离数据集的节点\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#运行示例1-创建没有挂载数据集的pod-它将尽量被调度到远离数据集的节点\"}},[a._v(\"#\")]),a._v(\" 运行示例1: 创建没有挂载数据集的Pod，它将尽量被调度到远离数据集的节点\")]),a._v(\" \"),s(\"p\",[s(\"strong\",[a._v(\"创建Pod\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ cat\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<<\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v(\"EOF\"),s(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"nginx-1.yaml\")]),a._v(\"\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: nginx-1\\nspec:\\n  containers:\\n    - name: nginx-1\\n      image: nginx-1\\nEOF\")]),a._v(\"\\n$ kubectl create -f nginx-1.yaml\\n\")])])]),s(\"p\",[s(\"strong\",[a._v(\"查看Pod\")])]),a._v(\" \"),s(\"p\",[a._v(\"查看Pod的yaml文件，发现被注入了如下信息：\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-yaml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"spec\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"affinity\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"nodeAffinity\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"preferredDuringSchedulingIgnoredDuringExecution\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"preference\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"matchExpressions\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n              \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"key\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" fluid.io/dataset\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\"num\\n                \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"operator\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" DoesNotExist\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"weight\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"100\")]),a._v(\"\\n\")])])]),s(\"p\",[a._v(\"正如亲和性所影响的，Pod调度到了没有缓存的node.172.16.0.16节点。\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ kubectl get pods nginx-1 -o  custom-columns\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),a._v(\"NAME:metadata.name,NODE:.spec.nodeName\\nNAME    NODE\\nnginx-1   node.172.16.0.16\\n\")])])]),s(\"h2\",{attrs:{id:\"运行示例2-创建挂载数据集的pod-它将尽量往有数据集的节点调度\"}},[s(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#运行示例2-创建挂载数据集的pod-它将尽量往有数据集的节点调度\"}},[a._v(\"#\")]),a._v(\" 运行示例2: 创建挂载数据集的Pod，它将尽量往有数据集的节点调度\")]),a._v(\" \"),s(\"p\",[s(\"strong\",[a._v(\"创建Pod\")])]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ cat\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"<<\")]),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v(\"EOF\"),s(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\">\")]),a._v(\"nginx-2.yaml\")]),a._v(\"\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: nginx-2\\nspec:\\n  containers:\\n    - name: nginx-2\\n      image: nginx-2\\n      volumeMounts:\\n        - mountPath: /data\\n          name: hbase-vol\\n  volumes:\\n    - name: hbase-vol\\n      persistentVolumeClaim:\\n        claimName: hbase\\nEOF\")]),a._v(\"\\n$ kubectl create -f nginx-2.yaml\\n\")])])]),s(\"p\",[s(\"strong\",[a._v(\"查看Pod\")])]),a._v(\" \"),s(\"p\",[a._v(\"查看Pod的yaml文件，发现被注入了如下信息：\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-yaml extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-yaml\"}},[s(\"code\",[s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"spec\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n  \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"affinity\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n    \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"nodeAffinity\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"preferredDuringSchedulingIgnoredDuringExecution\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"preference\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"matchExpressions\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"key\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" fluid.io/s\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\"default\"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\"hbase\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"operator\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" In\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"values\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token string\"}},[a._v('\"true\"')]),a._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"weight\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token number\"}},[a._v(\"100\")]),a._v(\"\\n      \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"requiredDuringSchedulingIgnoredDuringExecution\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"nodeSelectorTerms\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n        \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"matchExpressions\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n          \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"key\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" kubernetes.io/hostname\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"operator\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\" In\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token key atrule\"}},[a._v(\"values\")]),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\":\")]),a._v(\"\\n            \"),s(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[a._v(\"-\")]),a._v(\" node.172.16.1.84\\n\")])])]),s(\"p\",[a._v(\"通过亲和性配置，应用被注入了两个信息，一个fuse所配置nodeSelector，另一个是和缓存worker的弱亲和性配置。\")]),a._v(\" \"),s(\"div\",{staticClass:\"language-shell extra-class\"},[s(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[s(\"code\",[a._v(\"$ kubectl get pods nginx-2 -o  custom-columns\"),s(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a._v(\"=\")]),a._v(\"NAME:metadata.name,NODE:.spec.nodeName\\nNAME    NODE\\nnginx-1   node.172.16.1.84\\n\")])])]),s(\"p\",[a._v(\"从结果上看, 可以看到pod被调度到了可以缓存的节点。\")])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}