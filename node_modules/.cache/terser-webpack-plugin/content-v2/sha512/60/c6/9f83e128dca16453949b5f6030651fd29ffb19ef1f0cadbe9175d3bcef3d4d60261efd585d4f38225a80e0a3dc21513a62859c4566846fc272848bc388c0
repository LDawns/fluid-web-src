{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{469:function(e,s,a){\"use strict\";a.r(s);var t=a(50),n=Object(t.a)({},(function(){var e=this,s=e.$createElement,a=e._self._c||s;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":e.$parent.slotKey}},[a(\"h1\",{attrs:{id:\"demo-single-machine-multiple-dataset-speed-up-accessing-remote-files\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#demo-single-machine-multiple-dataset-speed-up-accessing-remote-files\"}},[e._v(\"#\")]),e._v(\" DEMO - Single-Machine Multiple-Dataset Speed Up Accessing Remote Files\")]),e._v(\" \"),a(\"p\",[e._v(\"Powered by \"),a(\"a\",{attrs:{href:\"https://www.alluxio.io\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Alluxio\"),a(\"OutboundLink\")],1),e._v(\" and \"),a(\"a\",{attrs:{href:\"https://github.com/libfuse/libfuse\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Fuse\"),a(\"OutboundLink\")],1),e._v(\", Fluid provides a simple way for users to access files stored in remote filesystems, just like accessing some ordinary files in local filesystem. Fluid manages and isolates the entire life cycle of data sets, especially for short life cycle applications (e.g data analysis tasks, machine learning tasks), users can deploy them on a large scale in a cluster.\")]),e._v(\" \"),a(\"p\",[e._v(\"This demo aims to show you an overview of all the features mentioned above.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"prerequisites\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#prerequisites\"}},[e._v(\"#\")]),e._v(\" Prerequisites\")]),e._v(\" \"),a(\"p\",[e._v(\"Before everything we are going to do, please refer to \"),a(\"a\",{attrs:{href:\"https://github.com/fluid-cloudnative/fluid/blob/master/docs/en/userguide/install.md\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Installation Guide\"),a(\"OutboundLink\")],1),e._v(\" to install Fluid on your Kubernetes Cluster, and make sure all the components used by Fluid are ready like this:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get pod -n fluid-system\\nNAME                                  READY   STATUS    RESTARTS   AGE\\nalluxioruntime-controller-5b64fdbbb-84pc6   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          8h\\ncsi-nodeplugin-fluid-fwgjh                  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          8h\\ncsi-nodeplugin-fluid-ll8bq                  \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          8h\\ndataset-controller-5b7848dbbb-n44dj         \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          8h\\n\")])])]),a(\"p\",[e._v(\"Normally, you shall see a Pod named \"),a(\"code\",[e._v(\"controller-manager\")]),e._v(\" and several Pods named \"),a(\"code\",[e._v(\"csi-nodeplugin\")]),e._v(\". The num of \"),a(\"code\",[e._v(\"csi-nodeplugin\")]),e._v(\" Pods depends on how many nodes your Kubernetes cluster have, so please make sure all \"),a(\"code\",[e._v(\"csi-nodeplugin\")]),e._v(\" Pods are working properly.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"install-resources-to-kubernetes\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#install-resources-to-kubernetes\"}},[e._v(\"#\")]),e._v(\" Install Resources to Kubernetes\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Label a node\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl  label node cn-beijing.192.168.0.199 \"),a(\"span\",{pre:!0,attrs:{class:\"token assign-left variable\"}},[e._v(\"fluid\")]),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"=\")]),e._v(\"multi-dataset\\n\")])])]),a(\"blockquote\",[a(\"p\",[e._v(\"In the next steps, we will use \"),a(\"code\",[e._v(\"NodeSelector\")]),e._v(\" to manage the nodes scheduled by the Dataset. There, it is only for experiment use.\")])]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check the \"),a(\"code\",[e._v(\"Dataset\")]),e._v(\" object to be created\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"dataset.yaml\")]),e._v('\\napiVersion: data.fluid.io/v1alpha1\\nkind: Dataset\\nmetadata:\\n  name: hbase\\nspec:\\n  mounts:\\n    - mountPoint: https://mirrors.tuna.tsinghua.edu.cn/apache/hbase/stable/\\n      name: hbase\\n  nodeAffinity:\\n    required:\\n      nodeSelectorTerms:\\n        - matchExpressions:\\n            - key: fluid\\n              operator: In\\n              values:\\n                - \"multi-dataset\"\\n  placement: \"Shared\" // set Exclusive or empty means dataset exclusive\\nEOF')]),e._v(\"\\n\\n$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"dataset1.yaml\")]),e._v('\\napiVersion: data.fluid.io/v1alpha1\\nkind: Dataset\\nmetadata:\\n  name: spark\\nspec:\\n  mounts:\\n    - mountPoint: https://mirrors.bit.edu.cn/apache/spark/\\n      name: spark\\n  nodeAffinity:\\n    required:\\n      nodeSelectorTerms:\\n        - matchExpressions:\\n            - key: fluid\\n              operator: In\\n              values:\\n                - \"multi-dataset\"\\n  placement: \"Shared\" \\nEOF')]),e._v(\"        \\n\")])])]),a(\"blockquote\",[a(\"p\",[e._v(\"Notes: Here, we use THU's tuna Apache mirror site as our \"),a(\"code\",[e._v(\"mountPoint\")]),e._v(\". If your environment isn't in Chinese mainland, please replace it with \"),a(\"code\",[e._v(\"https://downloads.apache.org/hbase/stable/\")]),e._v(\" and \"),a(\"code\",[e._v(\"https://downloads.apache.org/spark/\")]),e._v(\".\")])]),e._v(\" \"),a(\"p\",[e._v(\"Here, we'd like to create a resource object with kind \"),a(\"code\",[e._v(\"Dataset\")]),e._v(\". \"),a(\"code\",[e._v(\"Dataset\")]),e._v(\" is a Custom Resource Definition(CRD) defined by Fluid and used to tell Fluid where to find all the data you'd like to access. Under the hood, Fluid uses Alluxio to do some mount operations, so \"),a(\"code\",[e._v(\"mountPoint\")]),e._v(\" property can be any legal UFS path acknowledged by Alluxio. Here, we use \"),a(\"a\",{attrs:{href:\"https://docs.alluxio.io/os/user/stable/en/ufs/WEB.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"WebUFS\"),a(\"OutboundLink\")],1),e._v(\" for its simplicity.\")]),e._v(\" \"),a(\"p\",[e._v(\"For more information about UFS, please refer to \"),a(\"a\",{attrs:{href:\"https://docs.alluxio.io/os/user/stable/en/ufs/HDFS.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"Alluxio Docs - Storage Integrations\"),a(\"OutboundLink\")],1),e._v(\".\")]),e._v(\" \"),a(\"blockquote\",[a(\"p\",[e._v(\"We use Hbase stable and Spark on a mirror site of Apache downloads as an example of remote file. It's nothing special, you can change it to any remote file you like. But please note that, if you are going to use WebUFS like we do, files on Apache sites are highly recommended because you might need some \"),a(\"a\",{attrs:{href:\"https://docs.alluxio.io/os/user/stable/en/ufs/WEB.html#configuring-alluxio\",target:\"_blank\",rel:\"noopener noreferrer\"}},[e._v(\"advanced configurations\"),a(\"OutboundLink\")],1),e._v(\" due to current implementation of WebUFS.\")])]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Create the \"),a(\"code\",[e._v(\"Dataset\")]),e._v(\" object\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl apply -f dataset.yaml\\ndataset.data.fluid.io/hbase created\\n$ kubectl apply -f dataset1.yaml\\ndataset.data.fluid.io/spark created\\n\")])])]),a(\"p\",[a(\"strong\",[e._v(\"Check status of the \"),a(\"code\",[e._v(\"Dataset\")]),e._v(\" object\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get dataset\\nNAME    UFS TOTAL SIZE   CACHED   CACHE CAPACITY   CACHED PERCENTAGE   PHASE      AGE\\nhbase                                                                  NotBound   6s\\nspark                                                                  NotBound   4s\\n\")])])]),a(\"p\",[e._v(\"With a \"),a(\"code\",[e._v(\"NotBound\")]),e._v(\" phase in status, the dataset is not ready cause there isn't any \"),a(\"code\",[e._v(\"AlluxioRuntime\")]),e._v(\" object supporting it. We'll create one in the following steps.\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check the \"),a(\"code\",[e._v(\"AlluxioRuntime\")]),e._v(\" object to be created\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"runtime.yaml\")]),e._v('\\napiVersion: data.fluid.io/v1alpha1\\nkind: AlluxioRuntime\\nmetadata:\\n  name: hbase\\nspec:\\n  replicas: 1\\n  tieredstore:\\n    levels:\\n      - mediumtype: MEM\\n        path: /dev/shm\\n        quota: 2Gi\\n        high: \"0.95\"\\n        low: \"0.7\"\\nEOF')]),e._v(\"\\n\\n$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"runtime1.yaml\")]),e._v('\\napiVersion: data.fluid.io/v1alpha1\\nkind: AlluxioRuntime\\nmetadata:\\n  name: spark\\nspec:\\n  replicas: 1\\n  tieredstore:\\n    levels:\\n      - mediumtype: MEM\\n        path: /dev/shm\\n        quota: 4Gi\\n        high: \"0.95\"\\n        low: \"0.7\"\\n        \\nEOF')]),e._v(\"\\n\")])])]),a(\"p\",[a(\"strong\",[e._v(\"Create a \"),a(\"code\",[e._v(\"AlluxioRuntime\")]),e._v(\" object\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl create -f runtime.yaml\\nalluxioruntime.data.fluid.io/hbase created\\n\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[e._v(\"# Pay attention to waiting for all components of Dataset hbase Running\")]),e._v(\"\\n$ kubectl get pod -o wide \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"grep\")]),e._v(\" hbase\\nNAME                 READY   STATUS    RESTARTS   AGE   IP              NODE                       NOMINATED NODE   READINESS GATES\\nhhbase-fuse-jl2g2     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          2m24s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.199   cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nhbase-master-0       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          2m55s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.200   cn-beijing.192.168.0.200   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nhbase-worker-g89p8   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          2m24s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.199   cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n$ kubectl create -f runtime1.yaml\\nalluxioruntime.data.fluid.io/spark created\\n\")])])]),a(\"p\",[a(\"strong\",[e._v(\"Get the \"),a(\"code\",[e._v(\"AlluxioRuntime\")]),e._v(\" object\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get alluxioruntime\\nNAME    MASTER PHASE   WORKER PHASE   FUSE PHASE   AGE\\nhbase   Ready          Ready          Ready        2m14s\\nspark   Ready          Ready          Ready        58s\\n\")])])]),a(\"p\",[a(\"code\",[e._v(\"AlluxioRuntime\")]),e._v(\" is another CRD defined by Fluid. An \"),a(\"code\",[e._v(\"AluxioRuntime\")]),e._v(\" object describes specifications used to run an Alluxio instance.\")]),e._v(\" \"),a(\"p\",[e._v(\"Wait for a while, and make sure all components defined in the \"),a(\"code\",[e._v(\"AlluxioRuntime\")]),e._v(\" object are ready. You shall see something like this:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get pod -o wide\\nNAME                 READY   STATUS    RESTARTS   AGE     IP              NODE                       NOMINATED NODE   READINESS GATES\\nhhbase-fuse-jl2g2     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          2m24s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.199   cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nhbase-master-0       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          2m55s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.200   cn-beijing.192.168.0.200   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nhbase-worker-g89p8   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          2m24s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.199   cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nspark-fuse-5z49p     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"/1     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          19s     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.199   cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nspark-master-0       \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          50s     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.200   cn-beijing.192.168.0.200   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nspark-worker-96ksn   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\"/2     Running   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          19s     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"192.168\")]),e._v(\".0.199   cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"Note that the worker and fuse components of the different Datasets above can be dispatched to the same node \"),a(\"code\",[e._v(\"cn-beijing.192.168.0.199\")]),e._v(\" normally .\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check status of the \"),a(\"code\",[e._v(\"Dataset\")]),e._v(\" object again\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get dataset \\nNAME    UFS TOTAL SIZE   CACHED   CACHE CAPACITY   CACHED PERCENTAGE   PHASE   AGE\\nhbase   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"443\")]),e._v(\".89MiB        \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".00B    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\".00GiB          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0.0\")]),e._v(\"%                Bound   11m\\nspark   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\".92GiB          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".00B    \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"4\")]),e._v(\".00GiB          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0.0\")]),e._v(\"%                Bound   9m38s\\n\")])])]),a(\"p\",[e._v(\"Because it has been bound to a successfully started AlluxioRuntime, the state of the Dataset resource object has been updated, and the value of the \"),a(\"code\",[e._v(\"PHASE\")]),e._v(\" attribute has changed to the \"),a(\"code\",[e._v(\"Bound\")]),e._v(\" state. The basic information about the resource object can be obtained through the above command.\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check status of the \"),a(\"code\",[e._v(\"AlluxioRuntime\")]),e._v(\" object\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get alluxioruntime -o wide\\nNAME    READY MASTERS   DESIRED MASTERS   MASTER PHASE   READY WORKERS   DESIRED WORKERS   WORKER PHASE   READY FUSES   DESIRED FUSES   FUSE PHASE   AGE\\nhbase   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"               \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"                 Ready          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"               \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"                 Ready          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"             \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"               Ready        11m\\nspark   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"               \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"                 Ready          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"               \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"                 Ready          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"             \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\"               Ready        9m52s\\n\")])])]),a(\"p\",[e._v(\"Detailed information about the Alluxio instance is provided here.\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check related PersistentVolume and PersistentVolumeClaim\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"pv\")]),e._v(\"\\nNAME    CAPACITY   ACCESS MODES   RECLAIM POLICY   STATUS   CLAIM           STORAGECLASS   REASON   AGE\\nhbase   100Gi      RWX            Retain           Bound    default/hbase                           4m55s\\nspark   100Gi      RWX            Retain           Bound    default/spark                           51s\\n\")])])]),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get pvc\\nNAME    STATUS   VOLUME   CAPACITY   ACCESS MODES   STORAGECLASS   AGE\\nhbase   Bound    hbase    100Gi      RWX                           4m57s\\nspark   Bound    spark    100Gi      RWX                           53s\\n\")])])]),a(\"p\",[e._v(\"Related PV and PVC have been created by Fluid since the \"),a(\"code\",[e._v(\"Dataset\")]),e._v(\" object is ready(bounded). Workloads are now able to access remote files by mounting PVC.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"remote-file-access\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#remote-file-access\"}},[e._v(\"#\")]),e._v(\" Remote File Access\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check the app to be created\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"nginx.yaml\")]),e._v(\"\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: nginx-hbase\\nspec:\\n  containers:\\n    - name: nginx\\n      image: nginx\\n      volumeMounts:\\n        - mountPath: /data\\n          name: hbase-vol\\n  volumes:\\n    - name: hbase-vol\\n      persistentVolumeClaim:\\n        claimName: hbase\\n  nodeName: cn-beijing.192.168.0.199\\n\\nEOF\")]),e._v(\"\\n\\n$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"nginx1.yaml\")]),e._v(\"\\napiVersion: v1\\nkind: Pod\\nmetadata:\\n  name: nginx-spark\\nspec:\\n  containers:\\n    - name: nginx\\n      image: nginx\\n      volumeMounts:\\n        - mountPath: /data\\n          name: hbase-vol\\n  volumes:\\n    - name: hbase-vol\\n      persistentVolumeClaim:\\n        claimName: spark\\n  nodeName: cn-beijing.192.168.0.199\\n\\nEOF\")]),e._v(\"\\n\")])])]),a(\"p\",[a(\"strong\",[e._v(\"Run a demo app to access remote files\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl create -f nginx.yaml\\n$ kubectl create -f nginx1.yaml\\n\")])])]),a(\"p\",[e._v(\"Login to nginx hbase Pod:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"exec\")]),e._v(\" -it nginx-hbase -- \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"bash\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"Check file status:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"ls\")]),e._v(\" -lh /data/hbase\\ntotal 444M\\n-r--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 193K Sep \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16\")]),e._v(\" 00:53 CHANGES.md\\n-r--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 112K Sep \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16\")]),e._v(\" 00:53 RELEASENOTES.md\\n-r--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root  26K Sep \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16\")]),e._v(\" 00:53 api_compare_2.2.6RC2_to_2.2.5.html\\n-r--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 211M Sep \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16\")]),e._v(\" 00:53 hbase-2.2.6-bin.tar.gz\\n-r--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 200M Sep \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16\")]),e._v(\" 00:53 hbase-2.2.6-client-bin.tar.gz\\n-r--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root  34M Sep \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16\")]),e._v(\" 00:53 hbase-2.2.6-src.tar.gz\\n\")])])]),a(\"p\",[e._v(\"Login to nginx spark Pod:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"exec\")]),e._v(\" -it nginx-spark -- \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"bash\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"Check file status:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"ls\")]),e._v(\" -lh /data/spark/\\ntotal \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\".0K\\ndr--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"7\")]),e._v(\" Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"12\")]),e._v(\":21 spark-2.4.7\\ndr--r----- \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"7\")]),e._v(\" Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"12\")]),e._v(\":21 spark-3.0.1\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"du\")]),e._v(\" -h /data/spark/\\n999M\\t/data/spark/spark-3.0.1\\n968M\\t/data/spark/spark-2.4.7\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\".0G\\t/data/spark/\\n\")])])]),a(\"p\",[e._v(\"Loginout nginx Pod:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\"exit\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"As you may have seen, all the files on the WebUFS appear no differences from any other file in the local filesystem of the nginx Pod.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"speed-up-accessing-remote-files\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#speed-up-accessing-remote-files\"}},[e._v(\"#\")]),e._v(\" Speed Up Accessing Remote Files\")]),e._v(\" \"),a(\"p\",[e._v(\"To demonstrate how great speedup you may enjoy when accessing remote files, here is a demo job:\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check the test job to be launched\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"app.yaml\")]),e._v('\\napiVersion: batch/v1\\nkind: Job\\nmetadata:\\n  name: fluid-copy-test-hbase\\nspec:\\n  template:\\n    spec:\\n      restartPolicy: OnFailure\\n      containers:\\n        - name: busybox\\n          image: busybox\\n          command: [\"/bin/sh\"]\\n          args: [\"-c\", \"set -x; time cp -r /data/hbase ./\"]\\n          volumeMounts:\\n            - mountPath: /data\\n              name: hbase-vol\\n      volumes:\\n        - name: hbase-vol\\n          persistentVolumeClaim:\\n            claimName: hbase\\n      nodeName: cn-beijing.192.168.0.199\\n\\nEOF')]),e._v(\"\\n\\n$ cat\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<<\")]),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[e._v(\"EOF\"),a(\"span\",{pre:!0,attrs:{class:\"token bash punctuation\"}},[e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"app1.yaml\")]),e._v('\\napiVersion: batch/v1\\nkind: Job\\nmetadata:\\n  name: fluid-copy-test-spark\\nspec:\\n  template:\\n    spec:\\n      restartPolicy: OnFailure\\n      containers:\\n        - name: busybox\\n          image: busybox\\n          command: [\"/bin/sh\"]\\n          args: [\"-c\", \"set -x; time cp -r /data/spark ./\"]\\n          volumeMounts:\\n            - mountPath: /data\\n              name: spark-vol\\n      volumes:\\n        - name: spark-vol\\n          persistentVolumeClaim:\\n            claimName: spark\\n      nodeName: cn-beijing.192.168.0.199\\n\\nEOF')]),e._v(\"\\n\")])])]),a(\"p\",[a(\"strong\",[e._v(\"Launch a test job\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl create -f app.yaml\\njob.batch/fluid-copy-test-hbase created\\n$ kubectl create -f app1.yaml\\njob.batch/fluid-copy-test-spark created\\n\")])])]),a(\"p\",[e._v(\"The hbase job executes a shell command \"),a(\"code\",[e._v(\"time cp -r /data/hbase ./\")]),e._v(\", and \"),a(\"code\",[e._v(\"/data/hbase\")]),e._v(\" is the location where the remote file is mounted in the pod. After the command is completed, the execution time of the command will be displayed on the terminal.\")]),e._v(\" \"),a(\"p\",[e._v(\"The spark job executes a shell command \"),a(\"code\",[e._v(\"time cp -r /data/spark ./\")]),e._v(\", and \"),a(\"code\",[e._v(\"/data/hbase\")]),e._v(\" is the location where the remote file is mounted in the pod. After the command is completed, the execution time of the command will be displayed on the terminal.\")]),e._v(\" \"),a(\"p\",[e._v(\"Wait for a while and make sure the job has completed. You can check its runnning status by:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get pod -o wide \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"grep\")]),e._v(\" copy \\nffluid-copy-test-hbase-r8gxp   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"/1     Completed   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          4m16s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"172.29\")]),e._v(\".0.135    cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nfluid-copy-test-spark-54q8m   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"/1     Completed   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          4m14s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"172.29\")]),e._v(\".0.136    cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"If you see the above result, it means the job has been completed.\")]),e._v(\" \"),a(\"blockquote\",[a(\"p\",[e._v(\"Note: \"),a(\"code\",[e._v(\"r8gxp\")]),e._v(\" in \"),a(\"code\",[e._v(\"fluid-copy-test-hbase-r8gxp\")]),e._v(\" is a specifier generated by the Job we created. It's highly possible that you may have different specifier in your environment. Please remember replace it with your own specifier in the following steps\")])]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check running time of the test job\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl  logs fluid-copy-test-hbase-r8gxp\\n+ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"time\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cp\")]),e._v(\" -r /data/hbase ./\\nreal    3m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"34\")]),e._v(\".08s\\nuser    0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".00s\\nsys     0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\".24s\\n$ kubectl  logs fluid-copy-test-spark-54q8m\\n+ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"time\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cp\")]),e._v(\" -r /data/spark ./\\nreal    3m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"25\")]),e._v(\".47s\\nuser    0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".00s\\nsys     0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"5\")]),e._v(\".48s\\n\")])])]),a(\"p\",[e._v(\"It can be seen that the first remote file read hbase took nearly 3m34s, and the spark took nearly 3m25s.\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Check status of the dataset\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get dataset\\nNAME    UFS TOTAL SIZE   CACHED      CACHE CAPACITY   CACHED PERCENTAGE   PHASE   AGE\\nhbase   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"443\")]),e._v(\".89MiB        \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"443\")]),e._v(\".89MiB   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\".00GiB          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"100.0\")]),e._v(\"%              Bound   30m\\nspark   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\".92GiB          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\".92GiB     \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"4\")]),e._v(\".00GiB          \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"100.0\")]),e._v(\"%              Bound   28m\\n\")])])]),a(\"p\",[e._v(\"Now, all the remote files have been cached in Alluxio.\")]),e._v(\" \"),a(\"p\",[a(\"strong\",[e._v(\"Re-Launch the test job\")])]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl delete -f app.yaml\\n$ kubectl create -f app.yaml\\n$ kubectl delete -f app1.yaml\\n$ kubectl create -f app1.yaml\\n\")])])]),a(\"p\",[e._v(\"Since the remote file has been cached, the test job can be completed quickly:\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl get pod -o wide\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"|\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"grep\")]),e._v(\" fluid\\nfluid-copy-test-hbase-sf5md   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"/1     Completed   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          53s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"172.29\")]),e._v(\".0.137    cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\nfluid-copy-test-spark-fwp57   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"/1     Completed   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\"          51s   \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"172.29\")]),e._v(\".0.138    cn-beijing.192.168.0.199   \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"           \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\"<\")]),e._v(\"none\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[e._v(\">\")]),e._v(\"\\n\")])])]),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl  logs fluid-copy-test-hbase-sf5md\\n+ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"time\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cp\")]),e._v(\" -r /data/hbase ./\\nreal    0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".36s\\nuser    0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".00s\\nsys     0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".36s\\n$ kubectl  logs fluid-copy-test-spark-fwp57\\n+ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"time\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"cp\")]),e._v(\" -r /data/spark ./\\nreal    0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\".57s\\nuser    0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"0\")]),e._v(\".00s\\nsys     0m \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\".57s\\n\")])])]),a(\"p\",[e._v(\"Doing the same read operation, hbase takes only 0.36s this time and spark takes only 1.57s.\")]),e._v(\" \"),a(\"p\",[e._v(\"The great speedup attributes to the powerful caching capability provided by Alluxio. That means that once you access some remote file, it will be cached in Alluxio, and your next following operations will enjoy a local access instead of a remote one, and thus a great speedup.\")]),e._v(\" \"),a(\"blockquote\",[a(\"p\",[e._v(\"Note: Time spent for the test job depends on your network environment. If it takes too long for you to complete the job, changing a mirror or some smaller file might help.\")])]),e._v(\" \"),a(\"p\",[e._v(\"Also login to the host node (if possible)\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"ssh\")]),e._v(\" root@192.168.0.199\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"ls\")]),e._v(\" /dev/shm/default/\\nhbase  spark\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"ls\")]),e._v(\" -lh /dev/shm/default/hbase/alluxioworker/\\ntotal 444M\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 174K Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"20\")]),e._v(\":27 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"100663296\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 115K Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"20\")]),e._v(\":27 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16777216\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 200M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"20\")]),e._v(\":26 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"33554432\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 106K Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"20\")]),e._v(\":26 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"50331648\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 211M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"20\")]),e._v(\":27 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"67108864\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root  34M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"20\")]),e._v(\":27 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"83886080\")]),e._v(\"\\n$ \"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[e._v(\"ls\")]),e._v(\" -lh /dev/shm/default/spark/alluxioworker/\\ntotal \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"2\")]),e._v(\".0G\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 210M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":06 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"100663296\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root  16M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":07 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"117440512\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 195M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":05 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"134217728\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 214M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":05 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"150994944\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 140M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":08 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"16777216\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root  22M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":05 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"167772160\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 221M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":07 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"184549376\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 150M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":06 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"201326592\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 311K Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":07 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"218103808\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 322K Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":06 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"234881024\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 210M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":06 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"33554432\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 161M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":07 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"50331648\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 223M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":07 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"67108864\")]),e._v(\"\\n-rwxrwxrwx \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"1\")]),e._v(\" root root 208M Oct \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"22\")]),e._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"21\")]),e._v(\":07 \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[e._v(\"83886080\")]),e._v(\"\\n\")])])]),a(\"p\",[e._v(\"It can be seen that the block files cached by different Datasets are isolated according to the namespace and name of the Dataset.\")]),e._v(\" \"),a(\"h2\",{attrs:{id:\"clean-up\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#clean-up\"}},[e._v(\"#\")]),e._v(\" Clean Up\")]),e._v(\" \"),a(\"div\",{staticClass:\"language-shell extra-class\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-shell\"}},[a(\"code\",[e._v(\"$ kubectl delete -f \"),a(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[e._v(\".\")]),e._v(\"\\n$ kubectl label node cn-beijing.192.168.0.199 fluid-\\n\")])])])])}),[],!1,null,null,null);s.default=n.exports}}]);","extractedComments":[]}